name: osmocom
version: 1.0.0
summary: A graphical user interface for the Osmocom project
description: |
  This is the graphical user interface for the Osmocom project.
  This program is developed with Django framework. 
  It is a web application that allows to manage the Osmocom network.
  However, it is not a complete web application.
confinement: devmode
base: core22
grade: devel

parts:
  osmocom:
    plugin: python
    source: .

    build-packages:
      - gcc
      - pkg-config
      - python3-dev
      - build-essential
      - libxml2-dev
      - libcurl4-openssl-dev
      - libicu-dev

    stage-packages:
      - gir1.2-gtk-3.0
      - gir1.2-appindicator3-0.1
      - gir1.2-webkit2-4.0
      - gir1.2-ibus-1.0
      - gobject-introspection
      - gir1.2-atk-1.0
      - gir1.2-freedesktop
      - gir1.2-gdkpixbuf-2.0
      - gir1.2-glib-2.0
      - gir1.2-pango-1.0
      - libgtk-3-0
      - libgtk-3-dev
      - libgtk-3-common
      - libepoxy0
      - libepoxy-dev
      - gir1.2-gdkpixbuf-2.0
      - gir1.2-gudev-1.0
      - gir1.2-handy-0.0
      - gir1.2-rsvg-2.0
      - gir1.2-secret-1
      - libglib-object-introspection-perl
      - libglib2.0-dev
      - libgail-3-0
      - libgail-common
      - libgail18
      - libatk1.0-dev
      - libatk1.0-0
      - libatk-wrapper-java
      - libatk-wrapper-java-jni
      - libatk-bridge2.0-0
      - libatk-bridge2.0-dev
      - libatk-adaptor
      - eog
      - libgdk-pixbuf2.0-dev
      - libgdk-pixbuf2.0-0
      - libgdk-pixbuf2.0-common
      - libgdk-pixbuf2.0-bin
      - gir1.2-pango-1.0
      - libpango1.0-dev
      - libpango1.0-0
      - gstreamer1.0-x
      - libcogl-pango20
      - libpangocairo-1.0-0
      - pango1.0-tools
      - dbus
      - gir1.2-dbusmenu-glib-0.4
      - gir1.2-gck-1
    python-packages:
      - django
      - pywebview
      - pycairo
      - pygobject

    override-build: |
      mkdir -p $SNAPCRAFT_PART_INSTALL/osmo-gui
      cp -r * $SNAPCRAFT_PART_INSTALL/osmo-gui
      mv $SNAPCRAFT_PART_INSTALL/osmo-gui/gui $SNAPCRAFT_PART_INSTALL/run-program
      chmod +x $SNAPCRAFT_PART_INSTALL/run-program
      snapcraftctl build

apps:
  osmocom:
    command: run-program
    plugs: [network]
